<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Авторизация - Artfolio.ru</title>
  <link rel="stylesheet" href="../css/login.css">
  <script type="module">
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js';
    import { getAuth, createUserWithEmailAndPassword } from 'https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js';
    // Ваши настройки Firebase
    const firebaseConfig = {
        apiKey: "AIzaSyBTEgpcOXeYLlGrCftXHeLi8ETblUpPulc",
        authDomain: "artfolio-webn.firebaseapp.com",
        projectId: "artfolio-webn",
        storageBucket: "artfolio-webn.appspot.com",
        messagingSenderId: "283058220280",
        appId: "1:283058220280:web:d57ca1f0ef6db078e25f0d",
        measurementId: "G-JDDYG1C6J1"
    };

    // Инициализация Firebase
    firebase.initializeApp(firebaseConfig);

    function validateLoginForm(event) {
        event.preventDefault(); // Предотвращаем отправку формы

        const emailInput = event.target.querySelector('input[type="email"]');
        const passwordInput = event.target.querySelector('input[type="password"]');

        const email = emailInput.value;
        const password = passwordInput.value;

        // Проверка формата электронной почты
        if (!validateEmail(email)) {
            showNotification('Введите корректный адрес электронной почты.');
            return;
        }

        // Проверка длины пароля
        if (password.length < 6) {
            showNotification('Пароль должен содержать минимум 6 символов.');
            return;
        }

        // Проверка учетных данных с помощью Firebase
        firebase.auth().signInWithEmailAndPassword(email, password)
            .then((userCredential) => {
                // Успешный вход
                showNotification('Успешный вход!', 'success');
                // Здесь можно перенаправить пользователя на другую страницу
                // window.location.href = 'main.html';
            })
            .catch((error) => {
                const errorMessage = error.message;
                showNotification('Ошибка входа: ' + errorMessage);
            });
    }

    function validateEmail(email) {
        const re = /^[^s@]+@[^s@]+.[^s@]+$/;
        return re.test(String(email).toLowerCase());
    }

    function showNotification(message, type = 'error') {
        const notification = document.createElement('div');
        notification.className = 'notification ' + type;
        notification.textContent = message;

        document.body.appendChild(notification);
        
        // Показать уведомление
        notification.style.display = 'block';

        // Скрыть уведомление через 3 секунды
        setTimeout(() => {
            notification.remove();
        }, 3000);
    }
  </script>
</head>
<body>
    <!-- Header -->
    <header>
        <nav class="navbar">
            <div class="logo"><a href="main.html">ART<span>FOLIO</span></a></div>
            <ul>
                <li><a href="blog.html">Наш блог</a></li>
                <li><a href="register.html">Регистрация</a></li>
                <li><a href="login.html">Войти</a></li>
            </ul>
        </nav>
    </header>
    
    <div class="spacer"></div>
    <!-- Main Section -->
    <section class="main-section">
        <h1>Авторизация</h1>
        <div class="form-container">
            <form onsubmit="validateLoginForm(event)">
                <input type="email" placeholder="Электронная почта" required>
                <input type="password" placeholder="Пароль" required>
                <button type="submit">Войти</button>
            </form>
        </div>
    </section>
</body>
</html>